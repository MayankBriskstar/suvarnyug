@model Suvarnyug.Models.Biodata

@{
    ViewData["Title"] = "Edit Profile";
    Layout = "~/Views/Shared/_Layout1.cshtml";
    List<suvarnyug.Models.BiodataImage> imagesList = Model.Images?.ToList() ?? new List<suvarnyug.Models.BiodataImage>();
}

<div class="container mt-10">
    <div class="section-title"><h2 class="text-center"><span>Edit Matrimonial Profile</span></h2></div>
    <form asp-action="edit" method="post" enctype="multipart/form-data" id="biodataForm">
        @if (!ViewData.ModelState.IsValid && ViewData.ModelState.ContainsKey(""))
        {
            <div class="alert alert-danger">
                @ViewData.ModelState[""].Errors.First().ErrorMessage
            </div>
        }
        <input type="hidden" asp-for="BiodataId" />
        <div class="accordion" id="faqAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingOne">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                        1. Personal Information
                    </button>
                </h2>
                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        <div class="mb-3">
                            <label asp-for="IsForSelf" class="form-label">Profile For:</label>
                            <select asp-for="IsForSelf" class="form-control" id="profileForSelect">
                                <option value="1" selected="@(Model.IsForSelf == true ? "selected" : null)">Myself</option>
                                <option value="0" selected="@(Model.IsForSelf == false ? "selected" : null)">On Behalf Of</option>
                            </select>
                        </div>
                        <div class="mb-3" id="behalfOfContainer" style="display:none;">
                            <label asp-for="BehalfOf" class="form-label">On Behalf Of:</label>
                            <select asp-for="BehalfOf" class="form-control" id="BehalfOf">
                                <option value="">Please Select Behalf Of</option>
                                <option value="Son" selected="@(Model.BehalfOf == "Son" ? "selected" : null)">Son</option>
                                <option value="Daughter" selected="@(Model.BehalfOf == "Daughter" ? "selected" : null)">Daughter</option>
                                <option value="Brother" selected="@(Model.BehalfOf == "Brother" ? "selected" : null)">Brother</option>
                                <option value="Sister" selected="@(Model.BehalfOf == "Sister" ? "selected" : null)">Sister</option>
                                <option value="Friend" selected="@(Model.BehalfOf == "Friend" ? "selected" : null)">Friend</option>
                            </select>
                            <span id="BehalfError" class="text-danger" style="display:none;">Please select Behalf Of</span>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="FirstName" class="form-label">First Name</label>
                                <input asp-for="FirstName" class="form-control" required maxlength="50" />
                                <span asp-validation-for="FirstName" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="LastName" class="form-label">Last Name</label>
                                <input asp-for="LastName" class="form-control" required maxlength="50" />
                                <span asp-validation-for="LastName" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="DOB" class="form-label">Date of Birth</label>
                                <input asp-for="DOB" type="date" class="form-controldate" value="@Model.DOB.ToString("yyyy-MM-dd")" required id="DOB" />
                                <span asp-validation-for="DOB" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="TimeOfBirth" class="form-label">Time of Birth</label>
                                <input asp-for="TimeOfBirth" type="time" class="form-controldate" required />
                                <span asp-validation-for="TimeOfBirth" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="PlaceOfBirth" class="form-label">Place of Birth</label>
                                <input asp-for="PlaceOfBirth" class="form-control" required maxlength="100" />
                                <span asp-validation-for="PlaceOfBirth" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="Gender" class="form-label">Gender</label>
                                <select asp-for="Gender" class="nice-select" required>
                                    <option value="Male">Male</option>
                                    <option value="Female">Female</option>
                                </select>
                                <span asp-validation-for="Gender" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="Height" class="form-label">Height</label>
                                <select asp-for="Height" class="nice-select" required>
                                    @for (int i = 40; i <= 80; i++)
                                    {
                                        var heightValue = $"{i / 10.0} Feet";
                                        <option value="@heightValue">@heightValue</option>
                                    }
                                </select>
                                <span asp-validation-for="Height" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="Weight" class="form-label">Weight(kg)</label>
                                <input asp-for="Weight" class="form-control" required />
                                <span asp-validation-for="Weight" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="PhysicalStatus" class="form-label">Physical Status</label>
                                <select asp-for="PhysicalStatus" class="nice-select" required>
                                    <option value="Healthy">Healthy</option>
                                    <option value="Disabled">Disabled</option>
                                </select>
                                <span asp-validation-for="PhysicalStatus" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="CountryId" class="form-label">Country <span class="star-validation-ddl">*</span></label>
                                <select asp-for="CountryId" class="form-control" id="CountryId">
                                    <option value="">Select Country</option>
                                    @foreach (var country in ViewBag.Countries)
                                    {
                                        <option value="@country.CountryId" selected="@(Model.CountryId == country.CountryId ? "selected" : null)">
                                            @country.CountryName
                                        </option>
                                    }
                                </select>
                                <span id="CountryError" class="text-danger" style="display:none;">Please select a country</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="StateId" class="form-label">State <span class="star-validation-ddl">*</span></label>
                                <select asp-for="StateId" class="form-control" id="StateId">
                                    <option value="">Select State</option>
                                </select>
                                <span id="StateError" class="text-danger" style="display:none;">Please select a state</span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="CityId" class="form-label">City <span class="star-validation-ddl">*</span></label>
                                <select asp-for="CityId" class="form-control" id="CityId">
                                    <option value="">Select City</option>
                                </select>
                                <span id="CityError" class="text-danger" style="display:none;">Please select a city</span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="Cast" class="form-label">Caste</label>
                                <input asp-for="Cast" class="form-control1" required maxlength="100" />
                                <span asp-validation-for="Cast" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="Subcaste" class="form-label">Sub Caste</label>
                                <input asp-for="Subcaste" class="form-control" required maxlength="100" />
                                <span asp-validation-for="Subcaste" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Education <span class="star-validation-ddl">*</span></label>
                                <div class="nice-select form-control" tabindex="0" id="educationNiceSelect">
                                    <span class="current">Select Education</span>
                                    <ul class="list">
                                        <li class="options text-center" style="padding-left: 18px; color: #63ab45;"><strong>Medical Degrees</strong></li>
                                        <li data-value="MBBS" class="option"><input type="checkbox" value="MBBS"> MBBS</li>
                                        <li data-value="B.A.M.S." class="option"><input type="checkbox" value="B.A.M.S."> B.A.M.S.</li>
                                        <li data-value="B.D.S" class="option"><input type="checkbox" value="B.D.S"> B.D.S</li>
                                        <li data-value="B.H.M.S." class="option"><input type="checkbox" value="B.H.M.S."> B.H.M.S.</li>
                                        <li data-value="B.OPTOMETRY" class="option"><input type="checkbox" value="B.OPTOMETRY"> B.OPTOMETRY</li>
                                        <li data-value="B.PHARM" class="option"><input type="checkbox" value="B.PHARM"> B.PHARM</li>
                                        <li data-value="M.B.B.S." class="option"><input type="checkbox" value="M.B.B.S."> M.B.B.S.</li>
                                        <li data-value="M.D." class="option"><input type="checkbox" value="M.D."> M.D.</li>
                                        <li data-value="M.D.S. (Master of Dental Surgery)" class="option"><input type="checkbox" value="M.D.S. (Master of Dental Surgery)"> M.D.S. (Master of Dental Surgery)</li>
                                        <li data-value="M.PHARM" class="option"><input type="checkbox" value="M.PHARM"> M.PHARM</li>
                                        <li data-value="PHARM-D" class="option"><input type="checkbox" value="PHARM-D"> PHARM-D</li>
                                        <li data-value="Physiotherapist" class="option"><input type="checkbox" value="Physiotherapist"> Physiotherapist</li>
                                        <li data-value="Nursing Course" class="option"><input type="checkbox" value="Nursing Course"> Nursing Course</li>
                                        <li class="options text-center" style="padding-left: 18px; color: #63ab45;"><strong>Engineering & IT</strong></li>
                                        <li data-value="B.E. Metallurgy" class="option"><input type="checkbox" value="B.E. Metallurgy"> B.E. Metallurgy</li>
                                        <li data-value="B.E./B.Tech Civil" class="option"><input type="checkbox" value="B.E./B.Tech Civil"> B.E./B.Tech Civil</li>
                                        <li data-value="B.E./B.Tech Computer Engg." class="option"><input type="checkbox" value="B.E./B.Tech Computer Engg."> B.E./B.Tech Computer Engg.</li>
                                        <li data-value="B.E./B.Tech Mechanical" class="option"><input type="checkbox" value="B.E./B.Tech Mechanical"> B.E./B.Tech Mechanical</li>
                                        <li data-value="BCA" class="option"><input type="checkbox" value="BCA"> BCA</li>
                                        <li data-value="Bio-engineering" class="option"><input type="checkbox" value="Bio-engineering"> Bio-engineering</li>
                                        <li data-value="Diploma Engg." class="option"><input type="checkbox" value="Diploma Engg."> Diploma Engg.</li>
                                        <li data-value="M.E./M.Tech" class="option"><input type="checkbox" value="M.E./M.Tech"> M.E./M.Tech</li>
                                        <li data-value="M.Sc." class="option"><input type="checkbox" value="M.Sc."> M.Sc.</li>
                                        <li class="options text-center" style="padding-left: 18px; color: #63ab45;"><strong>Business & Commerce</strong></li>
                                        <li data-value="B.B.A." class="option"><input type="checkbox" value="B.B.A."> B.B.A.</li>
                                        <li data-value="B.COM" class="option"><input type="checkbox" value="B.COM"> B.COM</li>
                                        <li data-value="C.A (Chartered Accountant)" class="option"><input type="checkbox" value="C.A (Chartered Accountant)"> C.A (Chartered Accountant)</li>
                                        <li data-value="C.S (Company Secretary)" class="option"><input type="checkbox" value="C.S (Company Secretary)"> C.S (Company Secretary)</li>
                                        <li data-value="ICWA/CMA" class="option"><input type="checkbox" value="ICWA/CMA"> ICWA/CMA</li>
                                        <li data-value="M.B.A" class="option"><input type="checkbox" value="M.B.A"> M.B.A</li>
                                        <li data-value="M.COM" class="option"><input type="checkbox" value="M.COM"> M.COM</li>
                                        <li class="options text-center" style="padding-left: 18px; color: #63ab45;"><strong>Arts & Humanities</strong></li>
                                        <li data-value="Applied Art" class="option"><input type="checkbox" value="Applied Art"> Applied Art</li>
                                        <li data-value="Architect/Interior Decorator" class="option"><input type="checkbox" value="Architect/Interior Decorator"> Architect/Interior Decorator</li>
                                        <li data-value="B. Architect" class="option"><input type="checkbox" value="B. Architect"> B. Architect</li>
                                        <li data-value="B.A." class="option"><input type="checkbox" value="B.A."> B.A.</li>
                                        <li data-value="M.A." class="option"><input type="checkbox" value="M.A."> M.A.</li>
                                        <li data-value="Hotel & Hospitality Management" class="option"><input type="checkbox" value="Hotel & Hospitality Management"> Hotel & Hospitality Management</li>
                                        <li class="options text-center" style="padding-left: 18px; color: #63ab45;"><strong>Law</strong></li>
                                        <li data-value="L.L.B." class="option"><input type="checkbox" value="L.L.B."> L.L.B.</li>
                                        <li data-value="M.Ed." class="option"><input type="checkbox" value="M.Ed."> M.Ed.</li>
                                        <li class="options text-center" style="padding-left: 18px; color: #63ab45;"><strong>Other</strong></li>
                                        <li data-value="Ph.D" class="option"><input type="checkbox" value="Ph.D"> Ph.D</li>
                                        <li data-value="Under Graduate" class="option"><input type="checkbox" value="Under Graduate"> Under Graduate</li>
                                    </ul>
                                </div>
                                <input type="hidden" id="Education" name="Education" value="@Model.Education">
                                <span class="text-danger" id="educationError"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="Income" class="form-label">Income</label>
                                <select asp-for="Income" class="nice-select" required>
                                    <option value="Under 1 Lac">Under 1 Lac</option>
                                    <option value="1-2 Lac">1-2 Lac</option>
                                    <option value="2-5 Lac">2-5 Lac</option>
                                    <option value="5-10 Lac">5-10 Lac</option>
                                    <option value="Over 10 Lac">Over 10 Lac</option>
                                </select>
                                <span asp-validation-for="Income" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="MaritalStatus" class="form-label">Marital Status</label>
                                <select asp-for="MaritalStatus" class="nice-select" required>
                                    <option value="Un-Married">Un-Married</option>
                                    <option value="Widow">Widow</option>
                                    <option value="Divorcee">Divorcee</option>
                                </select>
                                <span asp-validation-for="MaritalStatus" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="MotherTongue" class="form-label">Mother Tongue</label>
                                <select asp-for="MotherTongue" class="nice-select" required>
                                    <option value="Gujarati">Gujarati</option>
                                    <option value="Hindi">Hindi</option>
                                    <option value="English">English</option>
                                    <option value="Tamil">Tamil</option>
                                    <option value="Urdu">Urdu</option>
                                    <option value="Other">Other</option>
                                </select>
                                <span asp-validation-for="MotherTongue" class="text-danger"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingTwo">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                        2. Family Details
                    </button>
                </h2>
                <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="FatherName" class="form-label">Father Name</label>
                                <input asp-for="FatherName" class="form-control" required maxlength="50" />
                                <span asp-validation-for="FatherName" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="MotherName" class="form-label">Mother Name</label>
                                <input asp-for="MotherName" class="form-control" required maxlength="50" />
                                <span asp-validation-for="MotherName" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="FathersStatus" class="form-label">Father's Status</label>
                                <input asp-for="FathersStatus" class="form-control" required maxlength="100" />
                                <span asp-validation-for="FathersStatus" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="MothersStatus" class="form-label">Mother's Status <span class="star-validation-ddl">*</span></label>
                                <input asp-for="MothersStatus" class="form-control" required maxlength="100" />
                                <span asp-validation-for="MothersStatus" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="NumberOfBrothers" class="form-label">Number of Brothers</label>
                                <select asp-for="NumberOfBrothers" class="nice-select" required>
                                    @for (int i = 0; i <= 10; i++)
                                    {
                                        <option value="@i">@i</option>
                                    }
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="NumberOfSisters" class="form-label">Number of Sisters</label>
                                <select asp-for="NumberOfSisters" class="nice-select" required>
                                    @for (int i = 0; i <= 10; i++)
                                    {
                                        <option value="@i">@i</option>
                                    }
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingThree">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                        3. Contact Information
                    </button>
                </h2>
                <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        <div class="mb-3">
                            <label asp-for="MobileNumber" class="form-label">Mobile Number</label>
                            <input asp-for="MobileNumber" class="form-control1" required maxlength="14" pattern="^[0-9]{10,14}$" title="Please enter a valid mobile number (10 to 14 digits only)." onkeypress="return isNumberKey(event)" oninput="this.value = this.value.replace(/[^0-9]/g, '');" />
                            <span asp-validation-for="MobileNumber" class="text-danger"></span>
                        </div>
                        <div class="mb-3">
                            <label asp-for="Email" class="form-label">Email</label>
                            <input asp-for="Email" class="form-control1" required maxlength="100" />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                        <div class="mb-3">
                            <label asp-for="Address" class="form-label">Address</label>
                            <input asp-for="Address" class="form-control1" required maxlength="250" />
                            <span asp-validation-for="Address" class="text-danger"></span>
                        </div>
                        <div class="mb-3">
                            <label asp-for="HouseType" class="form-label">House Type</label>
                            <select asp-for="HouseType" class="nice-select" required>
                                <option value="Own">Own</option>
                                <option value="Rent">Rent</option>
                            </select>
                            <span asp-validation-for="HouseType" class="text-danger"></span>
                        </div>
                        <div class="form-group" style="margin-top: 65px;">
                            <label>Upload Photo:</label>
                            <div class="row">
                                <div class="col-lg-12 profile-info">
                                    <div class="demo-gallery">
                                        <ul id="lightgallery">
                                            @if (Model.Images != null && Model.Images.Any())
                                            {
                                                for (int i = 0; i < Model.Images.Count; i++)
                                                {
                                                    var image = imagesList[i];
                                                    <li data-src="@Url.Content("~/" + image.ImageUrl)">
                                                        <a href="@Url.Content("~/" + image.ImageUrl)">
                                                            <img src="@Url.Content("~/" + image.ImageUrl)"
                                                                 alt="User Image" class="gallery-image"
                                                                 style="cursor: pointer;" data-toggle="modal"
                                                                 data-target="#imageModal" data-slide-to="@i" />
                                                            <div class="demo-gallery-poster">
                                                                <img src="~/images/img-box.svg">
                                                            </div>
                                                        </a>
                                                        <div class="radio-container row" style="display: inline; padding: 5px 0px 5px 10px;">
                                                            <input type="radio" name="defaultImageIndex" value="@i"
                                                                   class="default-image-radio col-lg-1" @(image.IsDefault ? "checked" : "")
                                                                   onclick="setDefaultImage(@i)" />
                                                            <label class="col-lg-11 p-0" style="font-size: 16px;">Set as Default Image</label>
                                                        </div>
                                                    </li>
                                                }
                                            }
                                            else
                                            {
                                                <p>No images uploaded yet.</p>
                                            }
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            @if (Model.Images.Count < 5)
                            {
                                <input type="file" name="images" id="imageUpload" multiple class="form-control" accept=".jpg,.jpeg,.png" />
                                <small class="form-text text-muted">You can upload up to @((5 - Model.Images.Count)) more image(s).</small>
                                <div id="fileValidationMessage" class="text-danger" style="display:none;"></div>
                            }
                            else
                            {
                                <p class="mt-3">You have already uploaded the maximum number of images (5).</p>
                            }
                        </div>
                        <div id="imagePreviewContainer" class="image-preview-container"></div>
                        @* <input type="hidden" name="defaultImageIndex" id="defaultImageIndex" value="@Model.Images.FindIndex(x => x.IsDefault)"> *@
                        <input type="hidden" name="defaultImageIndex" id="defaultImageIndex" value="@(imagesList.FindIndex(x => x.IsDefault))">
                    </div>
                </div>
            </div>
            <div class="accordion-item">
                <h2 class="accordion-header" id="headingFour">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                        4. Partner's Details
                    </button>
                </h2>
                <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#faqAccordion">
                    <div class="accordion-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="PartnerMaritalStatus" class="form-label">Partner's Marital Status</label>
                                <input asp-for="PartnerMaritalStatus" class="form-control" required maxlength="50" />
                                <span asp-validation-for="PartnerMaritalStatus" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="PartnerEducation" class="form-label">Partner's Education</label>
                                <input asp-for="PartnerEducation" class="form-control" required maxlength="100" />
                                <span asp-validation-for="PartnerEducation" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="PartnerCast" class="form-label">Partner's Cast</label>
                                <input asp-for="PartnerCast" class="form-control" required maxlength="100" />
                                <span asp-validation-for="PartnerCast" class="text-danger"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="PartnerCountry" class="form-label">Partner's Country</label>
                                <input asp-for="PartnerCountry" class="form-control" required maxlength="100" />
                                <span asp-validation-for="PartnerCountry" class="text-danger"></span>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label asp-for="AboutMyPartner" class="form-label">About My Partner</label>
                            <textarea asp-for="AboutMyPartner" class="form-control" required maxlength="10000"></textarea>
                            <span asp-validation-for="AboutMyPartner" class="text-danger"></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="form-group text-white text-center">
            <button type="submit" class="theme-btn style-two mt-10"> <span data-hover="Save Changes">Save Changes</span></button>
        </div>
    </form>
</div>
<link href="https://cdn.rawgit.com/sachinchoolur/lightgallery.js/master/dist/css/lightgallery.css" rel="stylesheet" />
<script src="https://cdn.rawgit.com/sachinchoolur/lightgallery.js/master/dist/js/lightgallery.js"></script>
<script src="https://cdn.rawgit.com/sachinchoolur/lg-zoom.js/master/dist/lg-zoom.js"></script>
<script>
    lightGallery(document.getElementById('lightgallery'), {
             selector: 'a'
         });
</script>
@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script>
        $(document).ready(function () {
            var savedStateId = '@Model.StateId';
            var savedCityId = '@Model.CityId';

            var savedEducationValues = $('#Education').val().split(',').map(item => item.trim());

            $('#educationNiceSelect').niceSelect('update');
            $('#educationNiceSelect .list .option').each(function () {
                var checkbox = $(this).find('input');
                var value = checkbox.val().trim();
                if (savedEducationValues.includes(value)) {
                    checkbox.prop('checked', true);
                    $(this).addClass('selected');
                }
                $(this).click(function (e) {
                    e.stopPropagation();
                    // var isChecked = checkbox.prop('checked');
                    // checkbox.prop('checked', !isChecked);
                    checkbox.prop('checked', !checkbox.prop('checked'));
                    updateEducationText();
                });
                checkbox.click(function (e) {
                    e.stopPropagation();
                    updateEducationText();
                });
            });

            function updateEducationText() {
                var selectedValues = [];
                $('#educationNiceSelect .list .option input:checked').each(function () {
                    selectedValues.push($(this).val());
                });
                $("#Education").val(selectedValues.join(","));
                if (selectedValues.length > 0) {
                    $("#educationNiceSelect .current").text(selectedValues.join(", "));
                    $("#educationNiceSelect").removeClass('is-invalid');
                    $("#educationError").text('');
                } else {
                    $("#educationNiceSelect .current").text("Select Education");
                }
            }
            updateEducationText();
            $('#biodataForm').submit(function (e) {
                let isValid = true;
                $('#CountryError').hide();
                $('#StateError').hide();
                $('#CityError').hide();
                $('#BehalfError').hide();
                if ($('#CountryId').val() === "") {
                    $('#CountryError').show();
                    isValid = false;
                }
                if ($('#StateId').val() === "") {
                    $('#StateError').show();
                    isValid = false;
                }
                if ($('#CityId').val() === "") {
                    $('#CityError').show();
                    isValid = false;
                }
                if ($('#profileForSelect').val() === '0') {
                    if ($('#BehalfOf').val() === "") {
                        $('#BehalfError').show();
                        isValid = false;
                    }
                }
                var educationSelected = $("#Education").val();
                if (educationSelected === "") {
                    isValid = false;
                    $('#educationError').text("Please Select Education");
                    $('#educationNiceSelect').addClass('is-invalid');
                } else {
                    $('#educationError').text('');
                    $('#educationNiceSelect').removeClass('is-invalid');
                }

                if (!isValid) {
                    e.preventDefault();
                }
            });
            function loadStates(countryId, selectedStateId) {
                if (countryId) {
                    $.getJSON('/Matrimonial/GetStates/' + countryId, function (data) {
                        $('#StateId').html('<option value="">Select State</option>').niceSelect('update');
                        $.each(data, function (index, state) {
                            var selected = (state.stateId == selectedStateId) ? 'selected' : '';
                            $('#StateId').append('<option value="' + state.stateId + '" ' + selected + '>' + state.stateName + '</option>');
                        });
                        $('#StateId').niceSelect('update');

                        if (selectedStateId) {
                            loadCities(selectedStateId, savedCityId);
                        }
                    });
                }
            }

            function loadCities(stateId, selectedCityId) {
                if (stateId) {
                    $.getJSON('/Matrimonial/GetCities/' + stateId, function (data) {
                        $('#CityId').html('<option value="">Select City</option>').niceSelect('update');
                        $.each(data, function (index, city) {
                            var selected = (city.cityId == selectedCityId) ? 'selected' : '';
                            $('#CityId').append('<option value="' + city.cityId + '" ' + selected + '>' + city.cityName + '</option>');
                        });
                        $('#CityId').niceSelect('update');
                    });
                }
            }
            loadStates($('#CountryId').val(), savedStateId);

            $('#CountryId').change(function () {
                var countryId = $(this).val();
                $('#StateId').html('<option value="">Select State</option>').niceSelect('update');
                $('#CityId').html('<option value="">Select City</option>').niceSelect('update');
                if (countryId) {
                    $.getJSON('/Matrimonial/GetStates/' + countryId, function (data) {
                        $.each(data, function (index, state) {
                            $('#StateId').append('<option value="' + state.stateId + '">' + state.stateName + '</option>');
                        });
                        $('#StateId').niceSelect('update');
                    });
                }
            });

            $('#StateId').change(function () {
                var stateId = $(this).val();
                $('#CityId').html('<option value="">Select City</option>').niceSelect('update');

                if (stateId) {
                    $.getJSON('/Matrimonial/GetCities/' + stateId, function (data) {
                        $.each(data, function (index, city) {
                            $('#CityId').append('<option value="' + city.cityId + '">' + city.cityName + '</option>');
                        });
                        $('#CityId').niceSelect('update');
                    });
                }
            });
            $('#imageUpload').on('change', function () {
                const files = this.files;
                const fileValidationMessage = document.getElementById("fileValidationMessage");
                fileValidationMessage.style.display = "none";
                fileValidationMessage.textContent = "";
                const allowedTypes = ["image/jpeg", "image/png", "image/gif", "image/jpg"];
                let invalidFiles = false;

                for (let i = 0; i < files.length; i++) {
                    if (!allowedTypes.includes(files[i].type)) {
                        invalidFiles = true;
                        break;
                    }
                }
                let currentUploadedImages = $('#lightgallery li').length;
                let newImageStartIndex = currentUploadedImages;

                if (currentUploadedImages + files.length > 5) {
                    fileValidationMessage.textContent = "You can upload up to 5 images. You have already uploaded " + currentUploadedImages + " image(s). ";
                    fileValidationMessage.style.display = "block";
                    this.value = "";
                    return;
                }

                if (invalidFiles) {
                    fileValidationMessage.textContent = "Unsupported file type. Please upload JPG, JPEG, PNG, or GIF.";
                    fileValidationMessage.style.display = "block";
                    this.value = "";
                }

                const previewContainer = $('#imagePreviewContainer');
                previewContainer.html('');

                for (let i = 0; i < files.length; i++) {
                    let newIndex = newImageStartIndex + i;
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        var container = $('<div class="image-item"></div>');
                        var imageDiv = $('<div class="image-preview"></div>');
                        imageDiv.append('<img src="' + e.target.result + '" alt="Preview Image" />');

                        var radioContainer = $('<div class="radio-container"></div>');
                        var index = currentUploadedImages + i;
                        var radioInput = $('<input type="radio" name="defaultImageIndex" value="' + newIndex + '" />');
                        var label = $('<label>Set as Default Image</label>');

                        radioContainer.append(radioInput).append(label);
                        container.append(imageDiv).append(radioContainer);

                        previewContainer.append(container);
                    };
                    reader.readAsDataURL(files[i]);
                }
            });
        });

        function setDefaultImage(index) {
            $("#defaultImageIndex").val(index);
            $(".default-image-radio").prop("checked", false);
            $('input[name="defaultImageIndex"][value="' + index + '"]').prop("checked", true);
        }
        function isNumberKey(evt) {
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            if (charCode > 31 && (charCode < 48 || charCode > 57)) {
                return false;
            }
            return true;
        }
    </script>
}
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script>
    $(document).ready(function () {
         var selectedValue = $('#profileForSelect').val();

        if (selectedValue === '1') {
            $('#behalfOfContainer').hide();
        } else if (selectedValue === '0') {
            $('#behalfOfContainer').show();
        } else {
            $('#behalfOfContainer').hide();
        }

        $('#profileForSelect').change(function () {
            var selectedValue = $(this).val();

            if (selectedValue === '1') {
                $('#behalfOfContainer').hide();
                $('#BehalfOf').val('');
            } else if (selectedValue === '0') {
                $('#behalfOfContainer').show();

            } else {
                $('#behalfOfContainer').hide();
                $('#BehalfOf').val('');
            }
        });
        $('#profileForSelect').trigger('change');
    });
</script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        let dobInput = document.getElementById("DOB");
        let validationMessage = document.createElement("span");
        validationMessage.classList.add("text-danger");
        validationMessage.style.display = "none";
        dobInput.parentNode.appendChild(validationMessage);

        if (dobInput) {
            let today = new Date();
            let minDate = new Date(today.getFullYear() - 18, today.getMonth(), today.getDate());
            dobInput.setAttribute("max", minDate.toISOString().split("T")[0]);

            dobInput.addEventListener("change", function () {
                let selectedDate = new Date(this.value);
                if (selectedDate > minDate) {
                    validationMessage.textContent = "You must be at least 18 years old.";
                    validationMessage.style.display = "block";
                    this.value = "";
                } else {
                    validationMessage.style.display = "none";
                }
            });
        }
    });
</script>